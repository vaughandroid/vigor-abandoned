apply plugin: 'com.android.application'
apply plugin: 'com.neenbedankt.android-apt'

android {
    def globalConfig = rootProject.ext

    compileSdkVersion globalConfig.androidCompileSdkVersion
    buildToolsVersion globalConfig.androidBuildToolsVersion

    compileOptions {
        sourceCompatibility globalConfig.javaSourceCompatibility
        targetCompatibility globalConfig.javaTargetCompatibility
    }

    defaultConfig {
        applicationId "vaughandroid.vigor"
        minSdkVersion globalConfig.androidMinSdkVersion
        targetSdkVersion globalConfig.androidTargetSdkVersion
        versionCode 1
        versionName "1.0"

        vectorDrawables.useSupportLibrary = true
    }

    buildTypes {
        debug {
            minifyEnabled false
            applicationIdSuffix ".debug"
        }
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    packagingOptions {
        exclude 'LICENSE.txt'
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/ASL2.0'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/LICENSE'
    }
}

dependencies {
    def javaLibs = rootProject.ext.javaLibs
    def androidLibs = rootProject.ext.androidLibs
    def javaTestLibs = rootProject.ext.javaTestLibs
    def androidTestLibs = rootProject.ext.androidTestLibs

    compile project(':domain')

    compile javaLibs.dagger
    apt javaLibs.daggerCompiler
    provided javaLibs.javaxAnnotation
    compile javaLibs.rxJava

    compile androidLibs.androidAnnotations
    compile androidLibs.appCompat
    compile androidLibs.butterKnife
    apt androidLibs.butterKnifeCompiler
    compile androidLibs.design
    debugCompile androidLibs.leakCanary
    releaseCompile androidLibs.leakCanaryNoOp
    compile androidLibs.rxAndroid
    compile androidLibs.timber

    testCompile javaTestLibs.assertJ
    testCompile javaTestLibs.jUnit
    testCompile javaTestLibs.mockito

    androidTestCompile javaTestLibs.assertJ
    androidTestCompile androidTestLibs.dexmaker
    androidTestCompile androidTestLibs.dexmakerMockito
    androidTestCompile androidTestLibs.dexmakerDx
    androidTestCompile androidTestLibs.espresso
    androidTestCompile javaTestLibs.jUnit
    androidTestCompile javaTestLibs.mockito
    androidTestCompile androidTestLibs.testSupportRules
    androidTestCompile androidTestLibs.testSupportRunner

    // Fix dependency version conflicts.
    androidTestCompile androidLibs.androidAnnotations
}
